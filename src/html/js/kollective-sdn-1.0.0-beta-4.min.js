var ksdn=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.Strategy={AJAX:"AJAX",FLASH:"FLASH"};t.AgentRequestMode={Ajax:[r.AJAX],Flash:[r.FLASH],AjaxWithFlashFallback:[r.AJAX,r.FLASH]},t.PROTOCOL={HTTPS:"https://",HTTP:"http://",RTMP:"rtmp://"},t.STREAM_TYPE={FLASH:"FLASH",HDS:"HDS",HLS:"HLS",DASH:"DASH",SMOOTH:"SMOOTH",RTMP:"RTMP"},t.PLAYTYPE={VOD:"VOD",LIVE:"LIVE"},t.LIMITS={LIMIT_REPORT_EVENTS_INFO:4096,LIMIT_REPORT_SEGMENTS_INFO:4096,LIMIT_REPORT_NODE_NAME:16,LIMIT_REPORT_MACHINE_NAME:64},t.EVENT={player:{state_none:0,state_stop:1,state_pause:2,state_play:3,state_buffering:6,state_end:8,state_seek_forward:20,state_seek_reverse:21,state_reload:77,state_exit:99},agent:{detect_ajax:-61,detect_flash:-62,detect_success:-63,detect_timeout:-64,detect_error_ajax_cannot_open:-65,detect_error_invalid_version:-66,detect_error_flash_config:-67,detect_failure_ajax:-68,detect_failure_flash_load:-69,detect_failure_flash_embed:-70,detect_all_fail:-71}}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!(t<=0)){var r=function(t){e.readyState!==XMLHttpRequest.DONE&&(e.onreadystatechange=null,t&&e.abort(),n(e))};"edge"===(0,u.default)().browser?setTimeout(r,t):(e.ontimeout=r.bind(null,!0),e.timeout=t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.XHR_ERROR=void 0,t.default=function(e){var t=e.method||"GET",n=e.url+(0,a.default)(e.params),r=Object.assign({},e.headers),o=null==e.expectJson||e.expectJson,s=null==e.async||e.async,u=e.onSuccess||l,f=e.onFailure||l,d=e.onError||l,g=e.onTimeout||l,h=e.timeout||0,p=e.body;try{var y=new XMLHttpRequest;y.onreadystatechange=function(){if(y&&y.readyState===XMLHttpRequest.DONE)if(y.status>=200&&y.status<400){var e=o&&y.responseText?JSON.parse(y.responseText):y.responseText;u(e,y)}else y.status>=400?f(y):y.status<100&&d(y,c.NO_RESPONSE)},y.open(t,n,s),i(y,h,g),o&&"GET"===t&&y.setRequestHeader("Accept","application/json");var m=r.auth;m&&(r.Authorization="Kontiki "+m,delete r.auth),Object.getOwnPropertyNames(r).forEach(function(e){y.setRequestHeader(e,r[e])}),y.send(p)}catch(e){d(null,c.CANNOT_OPEN)}};var o=n(8),a=r(o),s=n(9),u=r(s),l=function(){},c=t.XHR_ERROR={NO_RESPONSE:"no_ajax_repsonse",CANNOT_OPEN:"ajax_cannot_open"}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return m=e,v}}function o(e,t){try{return e(t)}catch(e){return m=e,v}}function a(e,t,n){try{e(t,n)}catch(e){return m=e,v}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&p(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new h(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){y(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?f(t.promise,e._18):d(t.promise,e._18));var r=o(n,e._18);r===v?d(t.promise,m):f(t.promise,r)})}function f(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===v)return d(e,m);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void g(e);if("function"===typeof n)return void p(n.bind(t),e)}e._83=1,e._18=t,g(e)}function d(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),g(e)}function g(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function h(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function p(e,t){var n=!1,r=a(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==v||(n=!0,d(t,m))}var y=n(13),m=null,v={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new h(e,t,n)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){var r,i,o;!function(n,a){i=[],r=a,void 0!==(o="function"===typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(){function e(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}function t(t){var n=t.replace(/^v/,"").replace(/\+.*$/,""),r=e(n,"-"),i=n.substring(0,r).split(".");return i.push(n.substring(r+1)),i}function n(e){return isNaN(Number(e))?e:Number(e)}function r(e){if("string"!==typeof e)throw new TypeError("Invalid argument expected string");if(!i.test(e))throw new Error("Invalid argument not valid semver")}var i=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;return function(e,i){[e,i].forEach(r);for(var o=t(e),a=t(i),s=0;s<Math.max(o.length-1,a.length-1);s++){var u=parseInt(o[s]||0,10),l=parseInt(a[s]||0,10);if(u>l)return 1;if(l>u)return-1}var c=o[o.length-1],f=a[a.length-1];if(c&&f){var d=c.split(".").map(n),g=f.split(".").map(n);for(s=0;s<Math.max(d.length,g.length);s++){if(void 0===d[s]||"string"===typeof g[s]&&"number"===typeof d[s])return-1;if(void 0===g[s]||"string"===typeof d[s]&&"number"===typeof g[s])return 1;if(d[s]>g[s])return 1;if(g[s]>d[s])return-1}}else if(c||f)return c?-1:1;return 0}})},function(e,t,n){(function(r){var i,o;!function(t,n){e.exports=n(t)}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r?r:this,function(r){"use strict";var a,s=r.Base64;if("undefined"!==typeof e&&e.exports)try{a=n(19).Buffer}catch(e){}var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(u),c=String.fromCharCode,f=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,g=function(e){return e.replace(d,f)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[u.charAt(n>>>18),u.charAt(n>>>12&63),t>=2?"=":u.charAt(n>>>6&63),t>=1?"=":u.charAt(63&n)].join("")},p=r.btoa?function(e){return r.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,h)},y=a?a.from&&Uint8Array&&a.from!==Uint8Array.from?function(e){return(e.constructor===a.constructor?e:a.from(e)).toString("base64")}:function(e){return(e.constructor===a.constructor?e:new a(e)).toString("base64")}:function(e){return p(g(e))},m=function(e,t){return t?y(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):y(String(e))},v=function(e){return m(e,!0)},S=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),T=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return c(55296+(n>>>10))+c(56320+(1023&n));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},P=function(e){return e.replace(S,T)},E=function(e){var t=e.length,n=t%4,r=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),i=[c(r>>>16),c(r>>>8&255),c(255&r)];return i.length-=[0,0,2,1][n],i.join("")},b=r.atob?function(e){return r.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,E)},_=a?a.from&&Uint8Array&&a.from!==Uint8Array.from?function(e){return(e.constructor===a.constructor?e:a.from(e,"base64")).toString()}:function(e){return(e.constructor===a.constructor?e:new a(e,"base64")).toString()}:function(e){return P(b(e))},w=function(e){return _(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},A=function(){var e=r.Base64;return r.Base64=s,e};if(r.Base64={VERSION:"2.4.5",atob:b,btoa:p,fromBase64:w,toBase64:m,utob:g,encode:m,encodeURI:v,btou:P,decode:w,noConflict:A},"function"===typeof Object.defineProperty){var L=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",L(function(){return w(this)})),Object.defineProperty(String.prototype,"toBase64",L(function(e){return m(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",L(function(){return m(this,!0)}))}}return r.Meteor&&(Base64=r.Base64),"undefined"!==typeof e&&e.exports?e.exports.Base64=r.Base64:(i=[],void 0!==(o=function(){return r.Base64}.apply(t,i))&&(e.exports=o)),{Base64:r.Base64}})}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace(/^kontiki:/,"").split(":").reverse().slice(0,-2),n=t[3]||"prod1",o=r[n];return{moid:t[0],company:t[2],dms:n,host:i(null==o?n:o)}};var r={prod1:"",gmcorp:"wg1",eu:"eu1",lbg:"api.kontiki.service.group",vc10:"api-vc10.corp.kontiki.com",vc14:"api-vc14.kontiki.com",tc1rh5:"tc1"},i=function(e){return e.indexOf(".")>=0?"https://"+e:"https://api."+(e&&e+".")+"kontiki.com"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null==e?"":(e=Object.getOwnPropertyNames(e).reduce(function(n,i){var a=e[i];return null==a?n:(!t&&o.has(i)&&(a=r.Base64.encodeURI(a)),n[i]=a,n)},{}),(0,i.stringify)(e,!0))};var r=n(6),i=n(20),o=new Set(["format","realmId","realmTicket"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){return e&&t&&e.length>t?e.substring(0,t):e}var t,n,r=navigator.appVersion,i=navigator.userAgent,o="other",a="-";-1!=(t=i.indexOf("Opera"))?(o="opera",a=i.substring(t+6),-1!=(t=i.indexOf("Version"))&&(a=i.substring(t+8))):-1!=(t=i.indexOf("MSIE"))?(o="ie",a=i.substring(t+5)):-1!=(t=i.indexOf("Edge"))?(o="edge",a=i.substring(t+5)):-1!=(t=i.indexOf("Chrome"))?(o="chrome",a=i.substring(t+7)):-1!=(t=i.indexOf("Safari"))?(o="safari",a=i.substring(t+7),-1!=(t=i.indexOf("Version"))&&(a=i.substring(t+8))):-1!=(t=i.indexOf("Firefox"))?(o="firefox",a=i.substring(t+8)):-1!=i.indexOf("Trident/")?(o="ie",a=i.substring(i.indexOf("rv:")+3)):(o="other",a="-"),-1!=(n=a.indexOf(";"))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(" "))&&(a=a.substring(0,n)),-1!=(n=a.indexOf(")"))&&(a=a.substring(0,n));var s="other",u=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 10.0",r:/(Windows NT 10.0)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0)/},{s:"Windows windows",r:/(WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"OpenBSD",r:/OpenBSD/},{s:"SunOS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"MacOSX",r:/Mac OS X/},{s:"MacOS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"SearchBT",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var l in u){var c=u[l];if(c.r&&c.r.test(i)){s=c.s;break}}var f="";switch(/Windows/.test(s)&&(f=/Windows (.*)/.exec(s)[1],s="windows"),s){case"MacOSX":f=/Mac OS X (10[\.\_\d]+)/.exec(i)[1];break;case"Android":f=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":f=/OS (\d+)_(\d+)_?(\d+)?/.exec(r),f=f[1]+"."+f[2]+"."+(0|f[3])}return{browser:e(o,8),browserVersion:e(a,8),os:e(s,8),osVersion:e(f,8)}}},function(e,t,n){n(11),e.exports=n(16)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(12).enable(),window.Promise=n(14)),Object.assign=n(15)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(f[t].error,e.whitelist||u))&&(f[t].displayId=c++,e.onUnhandled?(f[t].logged=!0,e.onUnhandled(f[t].displayId,f[t].error)):(f[t].logged=!0,o(f[t].displayId,f[t].error)))}function n(t){f[t].logged&&(e.onHandled?e.onHandled(f[t].displayId,f[t].error):f[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[t].displayId+".")))}e=e||{},l&&r(),l=!0;var i=0,c=0,f={};s._47=function(e){2===e._83&&f[e._56]&&(f[e._56].logged?n(e._56):clearTimeout(f[e._56].timeout),delete f[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,f[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(3),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,f=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof f?function(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(1))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(3);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!e.sdnData)return null;if(e.sdnData.constructor===Array)for(var t=0;t<e.sdnData.length;t++){var n=e.sdnData[t];if(n&&n.encodingInfo)return n.encodingInfo}return e.sdnData.encodingInfo}function o(e){var t=E.default[e];if(null==t)throw"No player interface for "+e;if("function"!==typeof t.isPlaying||"function"!==typeof t.isLive||"function"!==typeof t.getPlayerPosition||"function"!==typeof t.getPlayerDuration||"function"!==typeof t.setEventHandlers)throw"Incomplete player interface: "+e;return t}function a(e){var t=o(e),n=s.bind(null,e,t);return Object.defineProperty(n,"name",{value:e})}function s(t,n,r){function o(e,t,n){var r=(0,v.default)(n);(0,T.default)({url:(e||r.host)+"/api/v2/playback/video/"+r.moid,headers:{auth:t},onSuccess:function(e){if(n===x){var t=e.playbackVideo;F.onPlaybackRequestSuccess&&F.onPlaybackRequestSuccess(C,t),a(t)}},onFailure:function(e){n===x&&F.onPlaybackRequestFailure&&F.onPlaybackRequestFailure(C,e)&&L&&m()}})}function a(e){V=e,s(e)}function s(e){var t=function(t,n){if(e.urn===x)if(t.isInstalled()){C.agent=t;var r={provisionedForCurrentUrn:(0,h.default)(t.getNamespace(),e.urn),notBlackedOut:!t.getInBlackout()},i=!Object.getOwnPropertyNames(r).reduce(function(e,t){return e&&r[t]},!0);if(i)return F.onAgentRejected&&F.onAgentRejected(C,r),void m(e);if(F.onAgentDetected){var o=!!t.getKToken();F.onAgentDetected(C,o,t)}c(e)}else F.onAgentNotDetected&&F.onAgentNotDetected(C,n),m(e)};j=u(e),H=new _.default({hostHttp:e.clientHost,portHttp:e.clientPortHttp,portRtmp:e.clientPortRtmp,portHttps:e.clientPortHttps,timeout:I,flashTimeout:k,flashLoaderUrl:M,agentRequestMode:w,eventLogger:j&&j.logger,callback:t}),j&&j.setAgent(H)}function u(e){if(E&&C.player){var r=b||(0,v.default)(e.urn).host;return new A.default(C.player,t,n,e,E,r,R)}}function c(e){if(C.agent){var t=function(t){if(e.urn===x){var n=t&&t.success?F.onSessionStart:F.onSessionFailure;n&&n(C),y(e)}};C.agent.setSessionData({realmId:e.realmId,realmTicket:e.realmTicket,noPreroll:!0},t)}}function g(e){var t=!!C.agent.getKToken(),n=i(e),r=t?void 0:{noPreroll:!0},o=C.agent.getStreamUrl(n,e.urn,r);return 0===o.length?(console.log("Cannot play stream of type "+n),null):o}function p(e){var t=i(e);C.agent.prefetchStream(t,e.urn,null,function(t){if(C.agent&&e.urn===x){if(t.error){if(!t.reasons.reduce(function(e,t){return e||"error"===t.type&&t.reason!=S.XHR_ERROR.CANNOT_OPEN},!1))return void(F.onPrimingFailure&&F.onPrimingFailure(C))}F.onPrimingStart&&F.onPrimingStart(C),C.agent.startLongpoll(function(t,n){"string"===typeof t&&e.urn===x&&("manifestProgress"===t?(F.onProgress&&F.onProgress(C,n.progress,e.urn),n.ready&&P(e,g(e),!0)):F.onCommand&&F.onCommand(C,t,n))})}})}function y(e){(0,f.default)(C.getAgentData().version,"10.0")>=0?p(e):P(e,g(e),!0)}function m(e){var t=L||e.mediaCdnUrl;if(!t&&e.sdnData){var n=e.sdnData;n.length&&n.length>0&&(n=n[0]),n&&n.mediaCdnUrl&&(t=n.mediaCdnUrl)}P(e,t,!1)}function P(e,t,n){var r=!n&&L&&N,o=r?N:O[i(e)];if(!D||!t||!o||!C.player)return void console.log("Cannot play source: "+t);F.willSetSource&&F.willSetSource(C),D(C.player,t,o,n),j&&j.saveState(),F.didSetSource&&F.didSetSource(C)}var E,b,w,L,N,M,k,R,I,D,C=this;this.player=null,this.agent=null;var x,F,j,H,V;return this.configure=function(e){var t=function(t,n){return void 0===e[t]?n:e[t]},n=b,r=E;b=t("host",n),E=t("auth",r);var i=!!x&&(b!=n||E!=r);w=t("agentRequestMode",w)||d.AgentRequestMode.NoFlash,L=t("fallbackSrc",L),N=t("fallbackType",N),M=t("flashLoaderUrl",M),k=t("flashTimeout",k),R=t("reportInterval",R),I=t("timeout",I),j&&j.setReportInterval(R),i&&this.stop()}.bind(this),this.play=function(e,t,r){if("function"!==typeof(D=r.setSource||n.setSource))throw"Missing setSource callback: requried when the player interface lacks an implementation";var i,s;if("string"===typeof t?i=t:"object"===("undefined"===typeof t?"undefined":l(t))&&(s=t.playbackVideo||t,i=s.urn),i){if(x&&x!==i)return void this.stop(function(){this.play(e,t,r)}.bind(this));x=i,F=r,this.player=e,s?a(s):o(b,E,i)}}.bind(this),this.stop=function(e){if(!x||!this.agent)return void(e&&e());x=null,F=null,j=null,this.player=null,this.agent.stopStream(V.urn,e),this.agent.stopLongpoll(),V=null,this.agent=null}.bind(this),this.getAgentData=function(){return e.agentData},this.getLogs=function(){return e.agentLogs},this.flushLogs=function(){return e.agentLogs="",e.agentLogs},function(){return r&&C.configure(r),C}()}function u(e,t){E.default[e]=Object.assign(E.default[e]||{},t),L[e]=a(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.KollectiveAgent=t.AgentRequestMode=t.createPublicToken=t.installPlayerPlugin=t.Players=t.$g=void 0;var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(5),f=r(c),d=n(0),g=n(17),h=r(g),p=n(18),y=r(p),m=n(7),v=r(m),S=n(2),T=r(S),P=n(21),E=r(P),b=n(22),_=r(b),w=n(23),A=r(w),L={},O={DASH:"application/dash+xml",HLS:"application/x-mpegURL"};for(var N in E.default)E.default.hasOwnProperty(N)&&u(N,E.default[N]);t.$g=e,t.Players=L,t.installPlayerPlugin=u,t.createPublicToken=y.default,t.AgentRequestMode=d.AgentRequestMode,t.KollectiveAgent=_.default}).call(t,n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(t||"").split(":"),r=n.indexOf("moid");if(r<0)return!1;var i=n.slice(0,r).join(":")+":";return(e||"").split(",").filter(Boolean).reduce(function(e,t){return e||0===i.indexOf(t)},!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t;return t.indexOf(":")>=0&&(n=(0,o.default)(t).company),"pub-"+r.Base64.encode(e+"#"+n)};var r=n(6),i=n(7),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t){if("undefined"===typeof Buffer){var n=new Error('Cannot find module "Buffer"');throw n.code="MODULE_NOT_FOUND",n}e.exports=Buffer},function(e,t,n){"use strict";function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function i(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),a=r(t[2]);o in i||(i[o]=a)}return i}function o(e,t){t=t||"";var n=[];"string"!==typeof t&&(t="?");for(var r in e)a.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var a=Object.prototype.hasOwnProperty;t.stringify=o,t.parse=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Amp:{isPlaying:function(e){return!(e.seeking||e.paused||e.ended)},isLive:function(e){return e.isLive()},getPlayerPosition:function(e){return 1e3*e.currentTime},getPlayerDuration:function(e){return 1e3*e.duration},setEventHandlers:function(e,t){e.addEventListener(window.amp.eventName.timeupdate,t.onTimeUpdate),e.addEventListener(window.amp.eventName.error,t.onError),e.addEventListener(window.amp.eventName.pause,t.onPause),e.addEventListener(window.amp.eventName.play,t.onPlay),e.addEventListener(window.amp.eventName.ended,t.onEnd),e.addEventListener(window.amp.eventName.seeked,t.onSeekEnd),e.addEventListener(window.amp.eventName.waiting,t.onBuffering),e.addEventListener(window.amp.eventName.canplaythrough,t.onCanPlay)},setSource:function(e,t,n){e.src([{src:t,type:n}])}},Dashjs:{isPlaying:function(e){return!(e.isSeeking||e.isPaused)},isLive:function(e){return e.isDynamic()},getPlayerPosition:function(e){return 1e3*e.time()},getPlayerDuration:function(e){return 1e3*e.duration()},setEventHandlers:function(e,t){e.on(window.dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED,t.onTimeUpdate,this),e.on(window.dashjs.MediaPlayer.events.ERROR,t.onError,this),e.on(window.dashjs.MediaPlayer.events.PLAYBACK_PAUSED,t.onPause,this),e.on(window.dashjs.MediaPlayer.events.PLAYBACK_PLAYING,t.onPlay,this),e.on(window.dashjs.MediaPlayer.events.PLAYBACK_ENDED,t.onEnd,this),e.on(window.dashjs.MediaPlayer.events.PLAYBACK_SEEKED,t.onSeekEnd,this),e.on(window.dashjs.MediaPlayer.events.BUFFER_EMPTY,t.onBuffering,this),e.on(window.dashjs.MediaPlayer.events.CAN_PLAY,t.onCanPlay,this)},setSource:function(e,t){e.setAutoPlay(!0),e.attachSource(t)}},Flow:{isPlaying:function(e){return e.playing},isLive:function(e){return e.live},getPlayerPosition:function(e){return e.ready?1e3*e.video.time:0},getPlayerDuration:function(e){return e.ready?1e3*e.video.duration:0},setEventHandlers:function(e,t){e.on("progress",t.onTimeUpdate),e.on("error",t.onError),e.on("pause",t.onPause),e.on("ready",t.onPlay),e.on("resume",t.onPlay),e.on("finish",t.onEnd),e.on("seek",t.onSeekEnd),e.on("buffer",function(){e.video.buffer>e.video.time?t.onCanPlay():t.onBuffering()})},setSource:function(e,t,n){e.load({sources:[{src:t,type:n}]})}},Jwplayer:{isPlaying:function(e){return"playing"===e.getState()},isLive:function(e){return!isFinite(e.duration())},getPlayerPosition:function(e){return 1e3*e.getPosition()},getPlayerDuration:function(e){return 1e3*e.getDuration()},setEventHandlers:function(e,t){e.on("time",t.onTimeUpdate),e.on("error",t.onError),e.on("pause",t.onPause),e.on("play",function(e){"buffering"===e.oldstate&&t.onCanPlay(),t.onPlay()}),e.on("complete",t.onEnd),e.on("seeked",t.onSeekEnd),e.on("buffer",t.onBuffering),e.on("bufferChange",function(n){100===n.bufferPercent&&"playing"!==e.getState()&&t.onCanPlay()})},setSource:function(e,t){e.setup({file:t,autostart:"viewable"})}},Theo:{isPlaying:function(e){return!(e.seeking||e.paused||e.ended)},isLive:function(e){return!isFinite(e.duration)},getPlayerPosition:function(e){return 1e3*e.currentTime},getPlayerDuration:function(e){return 1e3*e.duration},setEventHandlers:function(e,t){e.addEventListener("timeupdate",t.onTimeUpdate),e.addEventListener("error",t.onError),e.addEventListener("pause",t.onPause),e.addEventListener("playing",t.onPlay),e.addEventListener("ended",t.onEnd),e.addEventListener("seeked",t.onSeekEnd),e.addEventListener("waiting",t.onBuffering),e.addEventListener("canplaythrough",t.onCanPlay)},setSource:function(e,t,n){e.source={sources:[{src:t,type:n}]},e.play()}},Videojs:{isPlaying:function(e){return!(e.seeking||e.paused||e.ended)},isLive:function(e){return!isFinite(e.duration())},getPlayerPosition:function(e){return 1e3*e.currentTime},getPlayerDuration:function(e){return 1e3*e.duration()},setEventHandlers:function(e,t){e.on("timeupdate",t.onTimeUpdate),e.on("error",t.onError),e.on("pause",t.onPause),e.on("play",t.onPlay),e.on("ended",t.onEnd),e.on("seeked",t.onSeekEnd),e.on("stalled",t.onBuffering),e.on("canplay",t.onCanPlay)},setSource:function(e,t,n){e.src({src:t,type:n}),e.play()}}}},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"$g."+e+"Response"}function o(t){function n(e,t){O[e]=O[e]||[],O[e].push(t)}function r(e){if(e.strategies=(e.strategies||o()).slice(),0===e.strategies.length)return void e.onAllStrategiesFailed(O[e.requestId]);null==e.requestId&&(e.requestId=N,N++);var t=e.uri.split("/"),n=t[t.length-1],a=e.options||{};switch(e.callbackParam=e.callbackParam||i(n),e.expectJson=null==e.expectJson||e.expectJson,e.onStart=e.onStart||m,e.onTimeout=e.onTimeout||S,e.onError=e.onError||T,e.onFailure=e.onFailure||P,e.flashDivId=a.flashDivId||"kollectiveAgent",e.flashTimeout=a.flashTimeout||F,e.timeout=a.timeout||e.defaultTimeout||j,e.strategies.shift()){case l.Strategy.AJAX:d(e.protocol||l.PROTOCOL.HTTPS,e);break;case l.Strategy.FLASH:p(e.protocol||l.PROTOCOL.HTTP,e);break;default:r(e)}}function o(){return A.isInstalled()?s(V):V}function s(e){e=e.slice();for(var t=[];e.length>0;){var n=e.shift();(function(e){switch(e){case l.Strategy.AJAX:return A.checkMinVersion("10.0");case l.Strategy.FLASH:return!0;default:return!1}})(n)&&t.push(n)}return t}function c(e,t){switch(e){case l.PROTOCOL.HTTPS:return l.PROTOCOL.HTTPS+I+":"+x+t;case l.PROTOCOL.HTTP:return l.PROTOCOL.HTTP+R+":"+D+t;case l.PROTOCOL.RTMP:return l.PROTOCOL.RTMP+R+":"+C+t;default:return null}}function d(e,t){var n=t.method,i=t.expectJson,o=t.timeout,a=t.uri,s=t.params,u=t.ignoreBase64Encoding,d=t.requestId,h=t.onStart,p=t.onSuccess,y=t.onFailure,m=t.onError,v=t.onTimeout,S=c(e,a)+(0,g.default)(s,u),T=l.Strategy.AJAX;h&&h(T,S),(0,f.default)({url:S,method:n,expectJson:i,timeout:o,onSuccess:p.bind(null,T),onFailure:function(e){y(T,d,e,"ajax"),r(t)},onError:function(e,n){m(T,d,n),r(t)},onTimeout:function(){v(T,d),r(t)}})}function p(t,n){e.timeoutTripped=!1;var i=Object.assign({},n.params);i.callback=n.callbackParam,e.lastFlashUrl=(c(t,n.uri)+(0,g.default)(i,n.ignoreBase64Encoding)).replace("&","%26"),n.onStart&&n.onStart(l.Strategy.FLASH,e.lastFlashUrl),e.timeoutFlash=n.flashTimeout;var o=function(e){n.onFailure(l.Strategy.FLASH,n.requestId,null,e),r(n)};if("undefined"!=typeof window.swfobject){e.flashSuccessCallback=n.onSuccess.bind(null,l.Strategy.FLASH),e.flashFailureCallback=o,e.flashTimeoutCallback=function(){e.timeoutTripped=!0,n.onTimeout(l.Strategy.FLASH,n.requestId),r(n)};var a={url:e.lastFlashUrl},s={allowscriptaccess:"always"};window.swfobject.embedSWF(H,n.flashDivId,"8","8","10.0.0","",a,s,"",function(t){t.success?(e.timeoutTripped=!1,e.flashLoadTimeoutID=setTimeout(e.flashTimeoutCallback,e.timeoutFlash)):o("flash_embed")})}else n.onError(l.Strategy.FLASH,n.requestId,"flash_config"),r(n)}function y(e){B&&B.addAgentEvent&&e&&B.addAgentEvent(e)}function m(t,n){switch(t){case l.Strategy.AJAX:e.agentLogs+="Attempting AJAX request";break;case l.Strategy.FLASH:e.agentLogs+="Attempting FLASH request"}e.agentLogs+=": "+n}function v(t,n){return t=t||function(){},n=n||function(){return null},function(r,i){switch(r){case l.Strategy.AJAX:e.agentLogs+="AJAX request succeeded\n",t(i);break;case l.Strategy.FLASH:e.agentLogs+="FLASH request succeeded\n",t(n())}}}function S(t,r){switch(n(r,{type:"timeout",reason:"timeout",strategy:t}),t){case l.Strategy.AJAX:e.agentLogs+="AJAX request timed out\n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH request timed out\n"}}function T(t,r,i){switch(n(r,{type:"error",reason:i,strategy:t}),t){case l.Strategy.AJAX:e.agentLogs+="AJAX request failed with error:"+i+"\n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH request failed due to improper Flash configuration\n"}}function P(t,r,i,o){switch(n(r,{type:"error",reason:o,strategy:t}),e.agentData=null,t){case l.Strategy.AJAX:e.agentLogs+="AJAX request failed:"+i.statusText+" \n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH request failed\n"}}function E(e){return function(t){e({error:"Request failed",reasons:t})}}function b(e){return Object.assign(Object.assign({},e),w)}function _(t,n,i){r({uri:"/api/v1/longpoll",params:n,defaultTimeout:3e4,options:i,onSuccess:v(function(e){if(!M){var r=!!e&&e.ts,o=!!e&&e.cmd,a=!!e&&e.params;if("manifestProgress"===o){var s=a&&a.percent,u=!!s&&100===parseInt(s);t(o,{progress:parseInt(s),ready:u})}else t(o,a);if(!M){var l=Object.assign({},n);l.ts=r,_(t,l,i)}}},function(){return e.longpollData}),onAllStrategiesFailed:function(e){if(!M){e=e||[];for(var r=[],o=0;o<e.length;o++){var a=e[o];"timeout"!==a.reason&&"no_ajax_response"!==a.reason&&r.push(a)}r.length>0&&t({error:"Longpoll request failed. Attempting again.",reasons:r}),M||_(t,n,i)}}})}if("object"!==("undefined"===typeof t?"undefined":a(t)))throw"KollectiveAgent Error: No parameter object passed in";e.agentData=null,e.agentLogs="",e.timeoutTripped=!1;var w,A=this,L=!1,O={},N=1,M=!0,k=t.callback||function(){},R=t.hostHttp||"127.0.0.1",I=t.hostHttps||"client.kontiki.com",D=""+(t.portHttp||"31013"),C=""+(t.portRtmp||"31014"),x=""+(t.portHttps||"31015"),F=t.flashTimeout||5e3,j=t.timeout||5e3,H=t.flashLoaderUrl||"flash/kontikiagentflashloader-3.swf",V=t.agentRequestMode||l.AgentRequestMode.Ajax,B=t.eventLogger;!function(){r({strategies:V,uri:"/kontiki/kontiki/cache/RetrieveAgentData",callbackParam:i("agent"),onStart:function(t){switch(t){case l.Strategy.AJAX:y(l.EVENT.agent.detect_sajax),e.agentLogs+="Attempting AJAX detection\n";break;case l.Strategy.FLASH:y(l.EVENT.agent.detect_flash),e.agentLogs+="Attempting FLASH detection\n"}},onSuccess:function(t,n,r){switch(t){case l.Strategy.AJAX:if(!n||!n.version)throw y(l.EVENT.agent.detect_error_invalid_version),"responseText lacked agent version: "+r.responseText;y(l.EVENT.agent.detect_success),e.agentLogs+="AJAX detection succeeded! Agent version:"+n.version+"\n",e.agentData=n,k(A);break;case l.Strategy.FLASH:y(l.EVENT.agent.detect_success),e.agentLogs+="FLASH detection has succeeded\n",L=!0,k(A)}},onTimeout:function(t,r){switch(n(r,{type:"timeout",reason:"timeout",strategy:t}),y(l.EVENT.agent.detect_timeout),t){case l.Strategy.AJAX:e.agentLogs+="AJAX detection timed out\n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH detection timed out\n"}},onError:function(t,r,i){n(r,{type:"error",reason:i,strategy:t});var o=i&&l.EVENT.agent["detect_error_"+i];switch(o&&y(o),e.agentData=null,t){case l.Strategy.AJAX:e.agentLogs+="AJAX detection has failed with error:"+o+"\n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH detection failed due to improper Flash configuration\n"}},onFailure:function(t,r,i,o){n(r,{type:"error",reason:o,strategy:t});var a=o&&l.EVENT.agent["detect_failure_"+o];switch(a&&y(a),e.agentData=null,t){case l.Strategy.AJAX:e.agentLogs+="AJAX detection has failed:"+i.statusText+" \n";break;case l.Strategy.FLASH:e.agentLogs+="FLASH detection failed\n"}},onAllStrategiesFailed:function(e){y(l.EVENT.agent.detect_all_fail),k(A,e)}})}(),this.isInstalled=function(){return"undefined"!==typeof e.agentData&&null!=e.agentData}.bind(this),this.getVersion=function(){return this.isInstalled()?e.agentData.version:h}.bind(this),this.getNamespace=function(){return this.isInstalled()?e.agentData.urn_namespace:h}.bind(this),this.getMachineName=function(){return this.isInstalled()?e.agentData.machine_name:h}.bind(this),this.getNodeId=function(){return this.isInstalled()?e.agentData.node_id:h}.bind(this),this.getRtmpClientPlaybackSupported=function(){return this.isInstalled()&&e.agentData.rtmp_mp4_vod}.bind(this),this.getInBlackout=function(){return this.isInstalled()?e.agentData.blackout:h}.bind(this),this.getStreamUri=function(e,t,n){if(!this.isInstalled())return h;switch(e){case l.STREAM_TYPE.FLASH:return"/stream/"+t+"/"+(n||"content.f4v");case l.STREAM_TYPE.HDS:return"/stream/"+t+"/"+(n||"manifest.f4m");case l.STREAM_TYPE.HLS:return"/stream/"+t+"/"+(n||"chunklist.m3u8");case l.STREAM_TYPE.DASH:return"/stream/"+t+"/"+(n||"playlist.ism/Manifest(format=mpd-time-csf)");case l.STREAM_TYPE.SMOOTH:return"/stream/"+t+"/"+(n||"playlist.ism/Manifest");case l.STREAM_TYPE.RTMP:return"/stream/"+t;default:return""}}.bind(this),this.getStreamUrl=function(e,t,n,r){if(!this.isInstalled())return h;var i=this.getStreamUri(e,t,r),o=this.checkMinVersion("10.0")?l.PROTOCOL.HTTPS:l.PROTOCOL.HTTP;return e===l.STREAM_TYPE.RTMP&&(o=l.PROTOCOL.RTMP),c(o,i)+(0,g.default)(b(n))}.bind(this),this.getKToken=function(){return this.isInstalled()?e.agentData.ktoken:null}.bind(this),this.isDetectViaFlash=function(){return L},this.checkMinVersion=function(t){return this.isInstalled()&&(0,u.default)(e.agentData.version,t)>=0}.bind(this),this.getAgentLogs=function(){return e.agentLogs},this.setSessionData=function(e,t,n){w={realmId:e.realmId,realmTicket:e.realmTicket,noPreroll:e.noPreroll};var i=this.getKToken();if(null==i)t();else{var o={ktoken:i},a=function(e){var n=null==e||null==e.error;n&&(w=o),t(n?{success:n}:e)};r({uri:"/api/v1/setSessionData",ignoreBase64Encoding:!0,method:"POST",params:b(o),options:n,onSuccess:v(a),onAllStrategiesFailed:E(a)})}}.bind(this),this.getContentStatus=function(t,n,i){r({uri:"/api/v1/contentStatus",params:{urn:t},options:i,onSuccess:v(n,function(){return e.contentStatusData}),onAllStrategiesFailed:E(n)})},this.downloadMonitor=function(t,n,i){r({uri:"/api/v1/downloadMonitor",params:{urn:t},options:i,onSuccess:v(n,function(){return e.downloadMonitorData}),onAllStrategiesFailed:E(n)})},this.isContentPrefetched=function(){return"undefined"!==typeof e.contentStatusData&&"Complete"==e.contentStatusData.state},this.getContentProgress=function(){return"undefined"!==typeof e.contentStatusData?e.contentStatusData.progress:-1},this.getDownloadMonitorData=function(){return e.downloadMonitorData},this.stopStream=function(e,t,n){r({uri:"/api/v1/stopStream",params:b({urn:e}),options:n,onSuccess:v(t),onAllStrategiesFailed:E(t)})},this.deleteContent=function(e,t,n){r({uri:"/api/v1/contentDelete",params:b({urn:e}),options:n,onSuccess:v(t),onAllStrategiesFailed:E(t)})},this.requestDeliveryGuid=function(t,n,i){r({uri:"/api/v1/contentDeliveryGuid",params:b({urn:t}),options:i,onSuccess:v(n,function(){return e.contentDeliveryGuidData}),onAllStrategiesFailed:E(n)})},this.sendErrorLogs=function(t,n){r({uri:"/api/v1/sendErrorLogs",params:{_:1},options:n,onSuccess:v(t,function(){return e.sendErrorLogsData}),onAllStrategiesFailed:E(t)})},this.prefetchStream=function(t,n,o,a,s){var u=this.getStreamUri(t,n,s&&s.file);r({expectJson:!1,protocol:t===l.STREAM_TYPE.RTMP?l.PROTOCOL.RTMP:null,uri:u,params:b(o),options:s,callbackParam:i("prefetchStream"),onSuccess:v(a,function(){return e.prefetchStreamData}),onAllStrategiesFailed:E(a)})}.bind(this),this.startLongpoll=function(e,t){M=!1,_(e,b({ts:0}),t)}.bind(this),this.stopLongpoll=function(){M=!0}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(5),u=r(s),l=n(0),c=n(2),f=r(c),d=n(8),g=r(d),h="";t.default=o}).call(t,n(4))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r,i,o,u){function c(e){v.agent&&setTimeout(v.agent.stopStream.bind(null,r.urn),e)}function g(){!T&&v.agent&&v.agent.requestDeliveryGuid(r.urn,function(e){T=e.deliveryGuid})}function h(e){if(!T||!v.agent)return void g();m();var n=y(),a=new Date;v.logger.updateLastReportTime();var s=v.logger.getPlayDuration();s<=0&&(s=1);var u=(0,l.default)(),c={contentMoid:r.moid,formatMoid:r.formatMoid,playGuid:S,deliveryGuid:T,percentage:0,inProgress:n,playDuration:s,startTime:v.logger.getStartTime(),playType:v.logger.getPlayType(),endTime:a.getTime(),prepareTime:v.logger.getPrepareTime(),bufferTime:v.logger.getBufferTime(),stallCount:v.logger.getStallCount(),stallTime:v.logger.getStallTime(),segmentList:v.logger.getSegmentList(),eventList:v.logger.getEventList(),nodeId:v.agent.getNodeId(),machineName:v.agent.getMachineName(),playContext:t,browser:u.browser,browserVersion:u.browserVersion,os:u.os,osVersion:u.osVersion},f=JSON.stringify({reportPlay:c}),d=o+"/api/v2/playback/report";n&&!e?p(d,f,!0):navigator.sendBeacon?navigator.sendBeacon(d+"?_ctype=json&auth="+i,f):p(d,f,!1)}function p(e,t,n){window.XMLHttpRequest&&e&&((0,f.default)({method:"POST",headers:{auth:i,"Content-Type":"application/json"},url:e,body:t,async:n}),n&&(P&&clearTimeout(P),P=setTimeout(function(){h(!1)},u)))}function y(){return n.isLive(e)}function m(){v.logger.setPlayType(y()?s.PLAYTYPE.LIVE:s.PLAYTYPE.VOD)}var v=this;this.logger=new a.default(e,n);var S=r.guid,T=null,P=null;this.setReportInterval=function(e){u=1e3*Math.max(60,e||r.reportInterval||0)}.bind(this),this.setReportInterval(u),this.setAgent=function(e){this.agent=e}.bind(this),this.reportPlay=function(){this.logger.onPlayerStateChange(s.EVENT.player.state_exit),h(!0)}.bind(this),this.saveState=function(){this.logger.saveCurrentState(S)}.bind(this),this.readState=function(){return this.logger.readSavedState(S)}.bind(this);var E={onTimeUpdate:function(){},onError:function(){},onPause:function(){this.logger.onPlayerStateChange(s.EVENT.player.state_pause),this.saveState()}.bind(this),onPlay:function(){this.logger.onPlayerStateChange(s.EVENT.player.state_play),this.saveState()}.bind(this),onEnd:function(){this.logger.onPlayerStateChange(s.EVENT.player.state_end),this.saveState(),c(d.DEFAULT),this.reportPlay()}.bind(this),onSeekEnd:function(){var e=this.logger.lastSegmentPercentage,t=this.logger.getPlayerPercentage();if(0!==e||0!==t){var n=e<t?s.EVENT.player.state_seek_forward:s.EVENT.player.state_seek_reverse;this.logger.onPlayerStateChange(n,t,t),this.saveState()}}.bind(this),onBuffering:function(){this.logger.onPlayerStateChange(s.EVENT.player.state_buffering),this.logger.saveCurrentState(S)}.bind(this),onCanPlay:function(){g(),setTimeout(function(){h(!1)},1e3)}};!function(){if(n.setEventHandlers&&n.setEventHandlers(e,E),window.onbeforeunload){var t=window.onbeforeunload;window.onbeforeunload=function(){c(d.NONE),v.reportPlay(),t()}}else window.onbeforeunload=function(){c(d.NONE),v.reportPlay()};if(window.onunload){var r=window.onunload;window.onunload=function(){c(d.NONE),v.reportPlay(),r()}}else window.onunload=function(){c(d.NONE),v.reportPlay()}}()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),a=r(o),s=n(0),u=n(9),l=r(u),c=n(2),f=r(c),d={NONE:0,DEFAULT:100};t.default=i},function(e,t,n){"use strict";function r(e,t){var n=new Date;this.startTime=n.getTime(),this.playerState=i.EVENT.player.state_none,this.playType=i.PLAYTYPE.LIVE,this.firstEventTime=0,this.firstPlayTime=0,this.firstBufferTime=0,this.bufferTime=0,this.lastTime=0,this.lastEvent=0,this.stallCount=0,this.stallTime=0,this.agentEventList="",this.rawEventList="",this.resetPlayTime=!1,this.lastFlashPlayStateTime=0,this.mediaEnded=!1,this.playDuration=0,this.lastReportTime=-1,this.duration=0,this.percentage=0,this.maxPercentage=0,this.buffering=!1,this.segmentList="",this.lastSegmentEvent="",this.lastSegmentPercentage=0,this.playStateCallback=null,this.getTime=function(){return(new Date).getTime()-this.startTime},this.getLastEvent=function(){return this.lastEvent},this.timeToPercent=function(e){if(0==this.duration)return 0;var t=this.duration?Math.round(1e3*e/this.duration)/10:0;return Math.min(t,100)},this.getPlayerPercentage=function(){var n=t.getPlayerDuration(e),r=t.getPlayerPosition(e);return(0,a.default)(n)&&(0,a.default)(r)&&0!=n&&(this.duration=n,this.percentage=Math.round(r/this.duration)/10,this.percentage=Math.min(this.percentage,100),this.maxPercentage=Math.max(this.maxPercentage,this.percentage)),this.percentage},this.getCachedPlayerPercentage=function(){return this.percentage},this.getMaxPercentage=function(){return this.maxPercentage},this.getStartTime=function(){return this.startTime},this.getPlayDuration=function(){return this.lastEvent==i.EVENT.player.state_play&&this.onPlayerStateChange(i.EVENT.player.state_play),this.playDuration},this.isPlaying=function(){return t.isPlaying(e)},this.updateLastReportTime=function(){this.lastReportTime=this.getTime()},this.hasNewReportingData=function(){return this.isPlaying()||this.lastTime>this.lastReportTime},this.getBufferTime=function(){return this.bufferTime},this.getPrepareTime=function(){return this.firstPlayTime},this.getStallCount=function(){return this.stallCount},this.getStallTime=function(){return this.stallTime},this.getSegmentList=function(){return this.segmentList},this.getEventList=function(){var e=this.agentEventList+this.rawEventList;if(e.length>=i.LIMITS.LIMIT_REPORT_EVENTS_INFO){e=e.substring(0,i.LIMITS.LIMIT_REPORT_EVENTS_INFO);var t=e.lastIndexOf(":");t>0&&(e=e.substring(0,t))}return e},this.isMediaEnded=function(){return this.mediaEnded},this.isBuffering=function(){return this.buffering},this.addSegment=function(e,t,n){var r=this.segmentList+"("+e+","+t+","+n+")";r.length<i.LIMITS.LIMIT_REPORT_SEGMENTS_INFO&&(this.segmentList=r)},this.addAgentEvent=function(e){var t=this.agentEventList+":"+e+":"+this.getTime();t.length<i.LIMITS.LIMIT_REPORT_EVENTS_INFO&&(this.agentEventList=t)},this.onPlayerStateChange=function(e,t,n){if(e!=i.EVENT.player.state_ready){var r=this.getTime(),o=r-this.lastTime,a=this.getCachedPlayerPercentage();if(this.lastEvent==i.EVENT.player.state_play&&(this.playDuration+=r-this.lastTime),this.lastEvent!=e){0==this.firstEventTime&&(this.firstEventTime=r),0==this.resetPlayTime&&0!=this.firstPlayTime&&this.lastEvent==i.EVENT.player.state_play&&e==i.EVENT.player.state_buffering&&o<10&&(this.resetPlayTime=!0,this.firstPlayTime=0),0==this.firstBufferTime&&e==i.EVENT.player.state_buffering&&(this.firstBufferTime=r),0!=this.firstPlayTime&&this.lastEvent==i.EVENT.player.state_buffering&&e!=i.EVENT.player.state_buffering&&o>10&&(this.stallCount++,this.stallTime+=r-this.lastTime),0===this.firstPlayTime&&e===i.EVENT.player.state_play&&(this.firstPlayTime=r,this.bufferTime=r-this.firstBufferTime),this.rawEventList+=":"+e+":"+r,e==i.EVENT.player.state_end&&(this.percentage=this.maxPercentage=100,this.mediaEnded=!0),this.buffering=e==i.EVENT.player.state_buffering,e==i.EVENT.player.state_stop&&(this.addSegment(this.lastSegmentPercentage,a,"st"),this.lastSegmentPercentage=0),e==i.EVENT.player.state_pause&&(this.addSegment(this.lastSegmentPercentage,a,"ps"),this.lastSegmentPercentage=a),e==i.EVENT.player.state_forward&&(this.addSegment(this.lastSegmentPercentage,t,"ff"),this.lastSegmentPercentage=n),e==i.EVENT.player.state_reverse&&(this.addSegment(this.lastSegmentPercentage,t,"rw"),this.lastSegmentPercentage=n),e==i.EVENT.player.state_exit&&(this.lastEvent==i.EVENT.player.state_stop&&o<100?this.addSegment(a,a,"ex"):this.addSegment(this.lastSegmentPercentage,a,"ex")),this.lastTime=r,this.lastEvent=e,this.playStateCallback&&this.playStateCallback(e)}}},this.saveLocalStorage=function(e,t){if("undefined"!==typeof Storage)try{localStorage.setItem(e,t)}catch(e){return void console.log(e)}},this.readLocalStorage=function(e){if("undefined"!==typeof Storage)try{return localStorage.getItem(e)}catch(e){return console.log(e),null}},this.removeLocalStorage=function(e){if("undefined"!==typeof Storage)try{localStorage.removeItem(e)}catch(e){return void console.log(e)}},this.saveCurrentState=function(e){if(e){var t=this.readLocalStorage("ksdn.current.report.session.id");t&&t!=e&&this.removeLocalStorage("ksdn.report.session.data."+t),this.saveLocalStorage("ksdn.current.report.session.id",e);var n={startTime:this.startTime,playerState:this.playerState,firstEventTime:this.firstEventTime,firstPlayTime:this.firstPlayTime,firstBufferTime:this.firstBufferTime,segmentList:this.segmentList,stallCount:this.stallCount,stallTime:this.stallTime,bufferTime:this.getBufferTime(),playDuration:this.playDuration,agentEventList:this.agentEventList,rawEventList:this.rawEventList,lastTime:this.lastTime,lastEvent:this.lastEvent,playType:this.playType};this.saveLocalStorage("ksdn.report.session.data."+e,JSON.stringify(n))}},this.readSavedState=function(e){if(!e)return null;var t=this.readLocalStorage("ksdn.current.report.session.id");if(t){if(t==e){var n=this.readLocalStorage("ksdn.report.session.data."+e);return JSON.parse(n)}this.removeLocalStorage("ksdn.report.session.data."+t)}return null},this.restoreSavedState=function(e){if(e){var t=this.readSavedState(e);if(t){this.startTime=t.startTime,this.playerState=t.playerState,this.firstEventTime=t.firstEventTime,this.firstPlayTime=t.firstPlayTime,this.firstBufferTime=t.firstBufferTime,this.segmentList=t.segmentList,this.stallCount=t.stallCount,this.stallTime=t.stallTime,this.bufferTime=t.bufferTime,this.playDuration=t.playDuration,this.lastTime=t.lastTime,this.lastEvent=t.lastEvent,this.playType=t.playType,this.agentEventList=t.agentEventList;var n=this.getTime(),r=t.rawEventList+":"+i.EVENT.player.state_reload+":"+n;this.rawEventList=r}}},this.setPlayType=function(e){this.playType=e},this.getPlayType=function(){return this.playType}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(25),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r},function(e,t,n){function r(e){return"number"==typeof e&&o(e)}var i=n(26),o=i.isFinite;e.exports=r},function(e,t,n){var r=n(27),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(1))}]);